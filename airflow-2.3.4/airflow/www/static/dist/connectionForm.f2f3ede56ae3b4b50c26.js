/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else if(typeof exports === 'object')
		exports["Airflow"] = factory();
	else
		root["Airflow"] = root["Airflow"] || {}, root["Airflow"]["connectionForm"] = factory();
})(self, () => {
return /******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./static/js/connection_form.js":
/*!**************************************!*\
  !*** ./static/js/connection_form.js ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ \"./static/js/utils.js\");\n/*!\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n/**\n * Created by janomar on 23/07/15.\n */\n\n/* global document, DOMParser, $ */\n\nconst restApiEnabled = (0,_utils__WEBPACK_IMPORTED_MODULE_0__.getMetaValue)('rest_api_enabled') === 'True';\nconst connectionTestUrl = (0,_utils__WEBPACK_IMPORTED_MODULE_0__.getMetaValue)('test_url');\n\nfunction decode(str) {\n  return new DOMParser().parseFromString(str, 'text/html').documentElement.textContent;\n}\n/**\n * Returns a map of connection type to its controls.\n */\n\n\nfunction getConnTypesToControlsMap() {\n  const connTypesToControlsMap = new Map();\n  const extraFormControls = Array.from(document.querySelectorAll(\"[id^='extra__'\"));\n  extraFormControls.forEach(control => {\n    const connTypeEnd = control.id.indexOf('__', 'extra__'.length);\n    const connType = control.id.substring('extra__'.length, connTypeEnd);\n    const controls = connTypesToControlsMap.has(connType) ? connTypesToControlsMap.get(connType) : [];\n    controls.push(control.parentElement.parentElement);\n    connTypesToControlsMap.set(connType, controls);\n  });\n  return connTypesToControlsMap;\n}\n/**\n * Returns the DOM element that contains the different controls.\n */\n\n\nfunction getControlsContainer() {\n  return document.getElementById('conn_id').parentElement.parentElement.parentElement;\n}\n/**\n   * Restores the behaviour for all fields. Used to restore fields to a\n   * well-known state during the change of connection types.\n   */\n\n\nfunction restoreFieldBehaviours() {\n  Array.from(document.querySelectorAll('label[data-orig-text]')).forEach(elem => {\n    elem.innerText = elem.dataset.origText;\n    delete elem.dataset.origText;\n  });\n  Array.from(document.querySelectorAll('.form-control')).forEach(elem => {\n    elem.placeholder = '';\n    elem.parentElement.parentElement.classList.remove('hide');\n  });\n}\n/**\n   * Applies special behaviour for fields. The behaviour is defined through\n   * config, passed by the server.\n   *\n   * @param {string} connection The connection object to apply to.\n   */\n\n\nfunction applyFieldBehaviours(connection) {\n  if (connection) {\n    if (Array.isArray(connection.hidden_fields)) {\n      connection.hidden_fields.forEach(field => {\n        document.getElementById(field).parentElement.parentElement.classList.add('hide');\n      });\n    }\n\n    if (connection.relabeling) {\n      Object.keys(connection.relabeling).forEach(field => {\n        const label = document.querySelector(`label[for='${field}']`);\n        label.dataset.origText = label.innerText;\n        label.innerText = connection.relabeling[field];\n      });\n    }\n\n    if (connection.placeholders) {\n      Object.keys(connection.placeholders).forEach(field => {\n        const placeholder = connection.placeholders[field];\n        document.getElementById(field).placeholder = placeholder;\n      });\n    }\n  }\n}\n/**\n * Dynamically enable/disable the Test Connection button as determined by the selected\n * connection type.\n @param {string} connectionType The connection type to change to.\n @param {Array} testableConnections Connection types that currently support testing via\n  Airflow REST API.\n */\n\n\nfunction handleTestConnection(connectionType, testableConnections) {\n  const testButton = document.getElementById('test-connection');\n  const testConnEnabled = testableConnections.includes(connectionType);\n\n  if (testConnEnabled) {\n    // If connection type can be tested in via REST API, enable button and clear toolip.\n    $(testButton).prop('disabled', false).removeAttr('title');\n  } else {\n    // If connection type can NOT be tested via REST API, disable button and display toolip\n    // alerting the user.\n    $(testButton).prop('disabled', true).attr('title', 'This connection type does not currently support testing via ' + 'Airflow REST API.');\n  }\n}\n\n$(document).ready(() => {\n  const fieldBehavioursElem = document.getElementById('field_behaviours');\n  const config = JSON.parse(decode(fieldBehavioursElem.textContent));\n  const testableConnsElem = document.getElementById('testable_connection_types');\n  const testableConns = decode(testableConnsElem.textContent); // Prevent login/password fields from triggering browser auth extensions\n\n  const form = document.getElementById('model_form');\n  if (form) form.setAttribute('autocomplete', 'off'); // Save all DOM elements into a map on load.\n\n  const controlsContainer = getControlsContainer();\n  const connTypesToControlsMap = getConnTypesToControlsMap(); // Create a test connection button & insert it right next to the save (submit) button\n\n  const testConnBtn = $('<button id=\"test-connection\" type=\"button\" class=\"btn btn-sm btn-primary\" ' + 'style=\"margin-left: 3px; pointer-events: all\">Test\\n <i class=\"fa fa-rocket\"></i></button>'); // Disable the Test Connection button if Airflow REST APIs are not enabled.\n\n  if (!restApiEnabled) {\n    $(testConnBtn).prop('disabled', true).attr('title', 'Airflow REST APIs have been disabled. ' + 'See api->auth_backends section of the Airflow configuration.');\n  }\n\n  $(testConnBtn).insertAfter($('form#model_form div.well.well-sm button:submit'));\n  /**\n   * Changes the connection type.\n   * @param {string} connType The connection type to change to.\n   */\n\n  function changeConnType(connType) {\n    Array.from(connTypesToControlsMap.values()).forEach(controls => {\n      controls.filter(control => control.parentElement === controlsContainer).forEach(control => controlsContainer.removeChild(control));\n    });\n    const controls = connTypesToControlsMap.get(connType) || [];\n    controls.forEach(control => controlsContainer.appendChild(control)); // Restore field behaviours.\n\n    restoreFieldBehaviours(); // Apply behaviours to fields.\n\n    applyFieldBehaviours(config[connType]); // Enable/Disable the Test Connection button. Only applicable if Airflow REST APIs are enabled.\n\n    if (restApiEnabled) {\n      handleTestConnection(connType, testableConns);\n    }\n  }\n  /**\n   * Displays the Flask style alert on UI via JS\n   *\n   * @param {boolean} status - true for success, false for error\n   * @param {string} message - The text message to show in alert box\n   */\n\n\n  function displayAlert(status, message) {\n    const alertClass = status ? 'alert-success' : 'alert-error';\n    let alertBox = $('.container .row .alert');\n\n    if (alertBox.length) {\n      alertBox.removeClass('alert-success').removeClass('alert-error');\n      alertBox.addClass(alertClass);\n      alertBox.text(message);\n      alertBox.show();\n    } else {\n      alertBox = $(`<div class=\"alert ${alertClass}\">\\n` + `<button type=\"button\" class=\"close\" data-dismiss=\"alert\">Ã—</button>\\n${message}</div>`);\n      $('.container .row').prepend(alertBox).show();\n    }\n  }\n  /**\n   * Produces JSON stringified data from a html form data\n   *\n   * @param {string} selector Jquery from selector string.\n   * @returns {string} Form data as a JSON string\n   */\n\n\n  function getSerializedFormData(selector) {\n    const outObj = {};\n    const extrasObj = {};\n    const inArray = $(selector).serializeArray();\n    /*\n    Form data fields are processed in the below order:\n        - csrf_token\n        - conn_id\n        - conn_type\n        - description\n        - host\n        - schema\n        - login\n        - password\n        - port\n        - extra\n        - All other custom form fields (i.e. fields that are named ``extra__...``) in\n          alphabetical order\n    */\n\n    $.each(inArray, function () {\n      if (this.name === 'conn_id') {\n        outObj.connection_id = this.value;\n      } else if (this.value !== '' && this.name === 'port') {\n        outObj[this.name] = Number(this.value);\n      } else if (this.value !== '' && this.name !== 'csrf_token') {\n        // Check if there are values in the classic Extra form field. These values come in\n        // stringified and need to be converted to a JSON object in case there are custom form\n        // field values that also need to be included in the ``extra`` object for the output\n        // payload.\n        if (this.name === 'extra') {\n          let extra;\n\n          try {\n            extra = JSON.parse(this.value);\n          } catch (e) {\n            if (e instanceof SyntaxError) {\n              displayAlert(false, 'Extra field value is not valid JSON.');\n            }\n\n            throw e;\n          }\n\n          Object.entries(extra).forEach(([key, val]) => {\n            extrasObj[key] = val;\n          }); // Check if field is a custom form field.\n        } else if (this.name.startsWith('extra__')) {\n          // prior to Airflow 2.3 custom fields were stored in the extra dict with prefix\n          // post-2.3 we allow to use with no prefix\n          // here we don't know which we are configured to use, so we populate both\n          extrasObj[this.name] = this.value;\n          extrasObj[this.name.replace(/extra__.+?__/, '')] = this.value;\n        } else {\n          outObj[this.name] = this.value;\n        }\n      }\n    }); // Stringify all extras for the AJAX call payload.\n\n    outObj.extra = JSON.stringify(extrasObj);\n    return JSON.stringify(outObj);\n  } // Bind click event to Test Connection button & perform an AJAX call via REST API\n\n\n  $('#test-connection').on('click', e => {\n    e.preventDefault();\n    $.ajax({\n      url: connectionTestUrl,\n      type: 'post',\n      contentType: 'application/json',\n      dataType: 'json',\n      data: getSerializedFormData('form#model_form'),\n\n      success(data) {\n        displayAlert(data.status, data.message);\n      },\n\n      error(jq, err, msg) {\n        displayAlert(false, msg);\n      }\n\n    });\n  });\n  const connTypeElem = document.getElementById('conn_type');\n  $(connTypeElem).on('change', e => {\n    const connType = e.target.value;\n    changeConnType(connType);\n  }); // Initialize the form by setting a connection type.\n\n  changeConnType(connTypeElem.value);\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zdGF0aWMvanMvY29ubmVjdGlvbl9mb3JtLmpzLmpzIiwibWFwcGluZ3MiOiI7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9BaXJmbG93Ly4vc3RhdGljL2pzL2Nvbm5lY3Rpb25fZm9ybS5qcz9mZGI0Il0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuICogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4gKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuICogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuICogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4gKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4gKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuICogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiAqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuICogdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBDcmVhdGVkIGJ5IGphbm9tYXIgb24gMjMvMDcvMTUuXG4gKi9cblxuLyogZ2xvYmFsIGRvY3VtZW50LCBET01QYXJzZXIsICQgKi9cbmltcG9ydCB7IGdldE1ldGFWYWx1ZSB9IGZyb20gJy4vdXRpbHMnO1xuY29uc3QgcmVzdEFwaUVuYWJsZWQgPSBnZXRNZXRhVmFsdWUoJ3Jlc3RfYXBpX2VuYWJsZWQnKSA9PT0gJ1RydWUnO1xuY29uc3QgY29ubmVjdGlvblRlc3RVcmwgPSBnZXRNZXRhVmFsdWUoJ3Rlc3RfdXJsJyk7XG5cbmZ1bmN0aW9uIGRlY29kZShzdHIpIHtcbiAgcmV0dXJuIG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoc3RyLCAndGV4dC9odG1sJykuZG9jdW1lbnRFbGVtZW50LnRleHRDb250ZW50O1xufVxuLyoqXG4gKiBSZXR1cm5zIGEgbWFwIG9mIGNvbm5lY3Rpb24gdHlwZSB0byBpdHMgY29udHJvbHMuXG4gKi9cblxuXG5mdW5jdGlvbiBnZXRDb25uVHlwZXNUb0NvbnRyb2xzTWFwKCkge1xuICBjb25zdCBjb25uVHlwZXNUb0NvbnRyb2xzTWFwID0gbmV3IE1hcCgpO1xuICBjb25zdCBleHRyYUZvcm1Db250cm9scyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltpZF49J2V4dHJhX18nXCIpKTtcbiAgZXh0cmFGb3JtQ29udHJvbHMuZm9yRWFjaChjb250cm9sID0+IHtcbiAgICBjb25zdCBjb25uVHlwZUVuZCA9IGNvbnRyb2wuaWQuaW5kZXhPZignX18nLCAnZXh0cmFfXycubGVuZ3RoKTtcbiAgICBjb25zdCBjb25uVHlwZSA9IGNvbnRyb2wuaWQuc3Vic3RyaW5nKCdleHRyYV9fJy5sZW5ndGgsIGNvbm5UeXBlRW5kKTtcbiAgICBjb25zdCBjb250cm9scyA9IGNvbm5UeXBlc1RvQ29udHJvbHNNYXAuaGFzKGNvbm5UeXBlKSA/IGNvbm5UeXBlc1RvQ29udHJvbHNNYXAuZ2V0KGNvbm5UeXBlKSA6IFtdO1xuICAgIGNvbnRyb2xzLnB1c2goY29udHJvbC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQpO1xuICAgIGNvbm5UeXBlc1RvQ29udHJvbHNNYXAuc2V0KGNvbm5UeXBlLCBjb250cm9scyk7XG4gIH0pO1xuICByZXR1cm4gY29ublR5cGVzVG9Db250cm9sc01hcDtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgRE9NIGVsZW1lbnQgdGhhdCBjb250YWlucyB0aGUgZGlmZmVyZW50IGNvbnRyb2xzLlxuICovXG5cblxuZnVuY3Rpb24gZ2V0Q29udHJvbHNDb250YWluZXIoKSB7XG4gIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29ubl9pZCcpLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50O1xufVxuLyoqXG4gICAqIFJlc3RvcmVzIHRoZSBiZWhhdmlvdXIgZm9yIGFsbCBmaWVsZHMuIFVzZWQgdG8gcmVzdG9yZSBmaWVsZHMgdG8gYVxuICAgKiB3ZWxsLWtub3duIHN0YXRlIGR1cmluZyB0aGUgY2hhbmdlIG9mIGNvbm5lY3Rpb24gdHlwZXMuXG4gICAqL1xuXG5cbmZ1bmN0aW9uIHJlc3RvcmVGaWVsZEJlaGF2aW91cnMoKSB7XG4gIEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnbGFiZWxbZGF0YS1vcmlnLXRleHRdJykpLmZvckVhY2goZWxlbSA9PiB7XG4gICAgZWxlbS5pbm5lclRleHQgPSBlbGVtLmRhdGFzZXQub3JpZ1RleHQ7XG4gICAgZGVsZXRlIGVsZW0uZGF0YXNldC5vcmlnVGV4dDtcbiAgfSk7XG4gIEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZvcm0tY29udHJvbCcpKS5mb3JFYWNoKGVsZW0gPT4ge1xuICAgIGVsZW0ucGxhY2Vob2xkZXIgPSAnJztcbiAgICBlbGVtLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRlJyk7XG4gIH0pO1xufVxuLyoqXG4gICAqIEFwcGxpZXMgc3BlY2lhbCBiZWhhdmlvdXIgZm9yIGZpZWxkcy4gVGhlIGJlaGF2aW91ciBpcyBkZWZpbmVkIHRocm91Z2hcbiAgICogY29uZmlnLCBwYXNzZWQgYnkgdGhlIHNlcnZlci5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNvbm5lY3Rpb24gVGhlIGNvbm5lY3Rpb24gb2JqZWN0IHRvIGFwcGx5IHRvLlxuICAgKi9cblxuXG5mdW5jdGlvbiBhcHBseUZpZWxkQmVoYXZpb3Vycyhjb25uZWN0aW9uKSB7XG4gIGlmIChjb25uZWN0aW9uKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoY29ubmVjdGlvbi5oaWRkZW5fZmllbGRzKSkge1xuICAgICAgY29ubmVjdGlvbi5oaWRkZW5fZmllbGRzLmZvckVhY2goZmllbGQgPT4ge1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChmaWVsZCkucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChjb25uZWN0aW9uLnJlbGFiZWxpbmcpIHtcbiAgICAgIE9iamVjdC5rZXlzKGNvbm5lY3Rpb24ucmVsYWJlbGluZykuZm9yRWFjaChmaWVsZCA9PiB7XG4gICAgICAgIGNvbnN0IGxhYmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgbGFiZWxbZm9yPScke2ZpZWxkfSddYCk7XG4gICAgICAgIGxhYmVsLmRhdGFzZXQub3JpZ1RleHQgPSBsYWJlbC5pbm5lclRleHQ7XG4gICAgICAgIGxhYmVsLmlubmVyVGV4dCA9IGNvbm5lY3Rpb24ucmVsYWJlbGluZ1tmaWVsZF07XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoY29ubmVjdGlvbi5wbGFjZWhvbGRlcnMpIHtcbiAgICAgIE9iamVjdC5rZXlzKGNvbm5lY3Rpb24ucGxhY2Vob2xkZXJzKS5mb3JFYWNoKGZpZWxkID0+IHtcbiAgICAgICAgY29uc3QgcGxhY2Vob2xkZXIgPSBjb25uZWN0aW9uLnBsYWNlaG9sZGVyc1tmaWVsZF07XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGZpZWxkKS5wbGFjZWhvbGRlciA9IHBsYWNlaG9sZGVyO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG59XG4vKipcbiAqIER5bmFtaWNhbGx5IGVuYWJsZS9kaXNhYmxlIHRoZSBUZXN0IENvbm5lY3Rpb24gYnV0dG9uIGFzIGRldGVybWluZWQgYnkgdGhlIHNlbGVjdGVkXG4gKiBjb25uZWN0aW9uIHR5cGUuXG4gQHBhcmFtIHtzdHJpbmd9IGNvbm5lY3Rpb25UeXBlIFRoZSBjb25uZWN0aW9uIHR5cGUgdG8gY2hhbmdlIHRvLlxuIEBwYXJhbSB7QXJyYXl9IHRlc3RhYmxlQ29ubmVjdGlvbnMgQ29ubmVjdGlvbiB0eXBlcyB0aGF0IGN1cnJlbnRseSBzdXBwb3J0IHRlc3RpbmcgdmlhXG4gIEFpcmZsb3cgUkVTVCBBUEkuXG4gKi9cblxuXG5mdW5jdGlvbiBoYW5kbGVUZXN0Q29ubmVjdGlvbihjb25uZWN0aW9uVHlwZSwgdGVzdGFibGVDb25uZWN0aW9ucykge1xuICBjb25zdCB0ZXN0QnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rlc3QtY29ubmVjdGlvbicpO1xuICBjb25zdCB0ZXN0Q29ubkVuYWJsZWQgPSB0ZXN0YWJsZUNvbm5lY3Rpb25zLmluY2x1ZGVzKGNvbm5lY3Rpb25UeXBlKTtcblxuICBpZiAodGVzdENvbm5FbmFibGVkKSB7XG4gICAgLy8gSWYgY29ubmVjdGlvbiB0eXBlIGNhbiBiZSB0ZXN0ZWQgaW4gdmlhIFJFU1QgQVBJLCBlbmFibGUgYnV0dG9uIGFuZCBjbGVhciB0b29saXAuXG4gICAgJCh0ZXN0QnV0dG9uKS5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKS5yZW1vdmVBdHRyKCd0aXRsZScpO1xuICB9IGVsc2Uge1xuICAgIC8vIElmIGNvbm5lY3Rpb24gdHlwZSBjYW4gTk9UIGJlIHRlc3RlZCB2aWEgUkVTVCBBUEksIGRpc2FibGUgYnV0dG9uIGFuZCBkaXNwbGF5IHRvb2xpcFxuICAgIC8vIGFsZXJ0aW5nIHRoZSB1c2VyLlxuICAgICQodGVzdEJ1dHRvbikucHJvcCgnZGlzYWJsZWQnLCB0cnVlKS5hdHRyKCd0aXRsZScsICdUaGlzIGNvbm5lY3Rpb24gdHlwZSBkb2VzIG5vdCBjdXJyZW50bHkgc3VwcG9ydCB0ZXN0aW5nIHZpYSAnICsgJ0FpcmZsb3cgUkVTVCBBUEkuJyk7XG4gIH1cbn1cblxuJChkb2N1bWVudCkucmVhZHkoKCkgPT4ge1xuICBjb25zdCBmaWVsZEJlaGF2aW91cnNFbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2JlaGF2aW91cnMnKTtcbiAgY29uc3QgY29uZmlnID0gSlNPTi5wYXJzZShkZWNvZGUoZmllbGRCZWhhdmlvdXJzRWxlbS50ZXh0Q29udGVudCkpO1xuICBjb25zdCB0ZXN0YWJsZUNvbm5zRWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0ZXN0YWJsZV9jb25uZWN0aW9uX3R5cGVzJyk7XG4gIGNvbnN0IHRlc3RhYmxlQ29ubnMgPSBkZWNvZGUodGVzdGFibGVDb25uc0VsZW0udGV4dENvbnRlbnQpOyAvLyBQcmV2ZW50IGxvZ2luL3Bhc3N3b3JkIGZpZWxkcyBmcm9tIHRyaWdnZXJpbmcgYnJvd3NlciBhdXRoIGV4dGVuc2lvbnNcblxuICBjb25zdCBmb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGVsX2Zvcm0nKTtcbiAgaWYgKGZvcm0pIGZvcm0uc2V0QXR0cmlidXRlKCdhdXRvY29tcGxldGUnLCAnb2ZmJyk7IC8vIFNhdmUgYWxsIERPTSBlbGVtZW50cyBpbnRvIGEgbWFwIG9uIGxvYWQuXG5cbiAgY29uc3QgY29udHJvbHNDb250YWluZXIgPSBnZXRDb250cm9sc0NvbnRhaW5lcigpO1xuICBjb25zdCBjb25uVHlwZXNUb0NvbnRyb2xzTWFwID0gZ2V0Q29ublR5cGVzVG9Db250cm9sc01hcCgpOyAvLyBDcmVhdGUgYSB0ZXN0IGNvbm5lY3Rpb24gYnV0dG9uICYgaW5zZXJ0IGl0IHJpZ2h0IG5leHQgdG8gdGhlIHNhdmUgKHN1Ym1pdCkgYnV0dG9uXG5cbiAgY29uc3QgdGVzdENvbm5CdG4gPSAkKCc8YnV0dG9uIGlkPVwidGVzdC1jb25uZWN0aW9uXCIgdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1zbSBidG4tcHJpbWFyeVwiICcgKyAnc3R5bGU9XCJtYXJnaW4tbGVmdDogM3B4OyBwb2ludGVyLWV2ZW50czogYWxsXCI+VGVzdFxcbiA8aSBjbGFzcz1cImZhIGZhLXJvY2tldFwiPjwvaT48L2J1dHRvbj4nKTsgLy8gRGlzYWJsZSB0aGUgVGVzdCBDb25uZWN0aW9uIGJ1dHRvbiBpZiBBaXJmbG93IFJFU1QgQVBJcyBhcmUgbm90IGVuYWJsZWQuXG5cbiAgaWYgKCFyZXN0QXBpRW5hYmxlZCkge1xuICAgICQodGVzdENvbm5CdG4pLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSkuYXR0cigndGl0bGUnLCAnQWlyZmxvdyBSRVNUIEFQSXMgaGF2ZSBiZWVuIGRpc2FibGVkLiAnICsgJ1NlZSBhcGktPmF1dGhfYmFja2VuZHMgc2VjdGlvbiBvZiB0aGUgQWlyZmxvdyBjb25maWd1cmF0aW9uLicpO1xuICB9XG5cbiAgJCh0ZXN0Q29ubkJ0bikuaW5zZXJ0QWZ0ZXIoJCgnZm9ybSNtb2RlbF9mb3JtIGRpdi53ZWxsLndlbGwtc20gYnV0dG9uOnN1Ym1pdCcpKTtcbiAgLyoqXG4gICAqIENoYW5nZXMgdGhlIGNvbm5lY3Rpb24gdHlwZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGNvbm5UeXBlIFRoZSBjb25uZWN0aW9uIHR5cGUgdG8gY2hhbmdlIHRvLlxuICAgKi9cblxuICBmdW5jdGlvbiBjaGFuZ2VDb25uVHlwZShjb25uVHlwZSkge1xuICAgIEFycmF5LmZyb20oY29ublR5cGVzVG9Db250cm9sc01hcC52YWx1ZXMoKSkuZm9yRWFjaChjb250cm9scyA9PiB7XG4gICAgICBjb250cm9scy5maWx0ZXIoY29udHJvbCA9PiBjb250cm9sLnBhcmVudEVsZW1lbnQgPT09IGNvbnRyb2xzQ29udGFpbmVyKS5mb3JFYWNoKGNvbnRyb2wgPT4gY29udHJvbHNDb250YWluZXIucmVtb3ZlQ2hpbGQoY29udHJvbCkpO1xuICAgIH0pO1xuICAgIGNvbnN0IGNvbnRyb2xzID0gY29ublR5cGVzVG9Db250cm9sc01hcC5nZXQoY29ublR5cGUpIHx8IFtdO1xuICAgIGNvbnRyb2xzLmZvckVhY2goY29udHJvbCA9PiBjb250cm9sc0NvbnRhaW5lci5hcHBlbmRDaGlsZChjb250cm9sKSk7IC8vIFJlc3RvcmUgZmllbGQgYmVoYXZpb3Vycy5cblxuICAgIHJlc3RvcmVGaWVsZEJlaGF2aW91cnMoKTsgLy8gQXBwbHkgYmVoYXZpb3VycyB0byBmaWVsZHMuXG5cbiAgICBhcHBseUZpZWxkQmVoYXZpb3Vycyhjb25maWdbY29ublR5cGVdKTsgLy8gRW5hYmxlL0Rpc2FibGUgdGhlIFRlc3QgQ29ubmVjdGlvbiBidXR0b24uIE9ubHkgYXBwbGljYWJsZSBpZiBBaXJmbG93IFJFU1QgQVBJcyBhcmUgZW5hYmxlZC5cblxuICAgIGlmIChyZXN0QXBpRW5hYmxlZCkge1xuICAgICAgaGFuZGxlVGVzdENvbm5lY3Rpb24oY29ublR5cGUsIHRlc3RhYmxlQ29ubnMpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogRGlzcGxheXMgdGhlIEZsYXNrIHN0eWxlIGFsZXJ0IG9uIFVJIHZpYSBKU1xuICAgKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHN0YXR1cyAtIHRydWUgZm9yIHN1Y2Nlc3MsIGZhbHNlIGZvciBlcnJvclxuICAgKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSAtIFRoZSB0ZXh0IG1lc3NhZ2UgdG8gc2hvdyBpbiBhbGVydCBib3hcbiAgICovXG5cblxuICBmdW5jdGlvbiBkaXNwbGF5QWxlcnQoc3RhdHVzLCBtZXNzYWdlKSB7XG4gICAgY29uc3QgYWxlcnRDbGFzcyA9IHN0YXR1cyA/ICdhbGVydC1zdWNjZXNzJyA6ICdhbGVydC1lcnJvcic7XG4gICAgbGV0IGFsZXJ0Qm94ID0gJCgnLmNvbnRhaW5lciAucm93IC5hbGVydCcpO1xuXG4gICAgaWYgKGFsZXJ0Qm94Lmxlbmd0aCkge1xuICAgICAgYWxlcnRCb3gucmVtb3ZlQ2xhc3MoJ2FsZXJ0LXN1Y2Nlc3MnKS5yZW1vdmVDbGFzcygnYWxlcnQtZXJyb3InKTtcbiAgICAgIGFsZXJ0Qm94LmFkZENsYXNzKGFsZXJ0Q2xhc3MpO1xuICAgICAgYWxlcnRCb3gudGV4dChtZXNzYWdlKTtcbiAgICAgIGFsZXJ0Qm94LnNob3coKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYWxlcnRCb3ggPSAkKGA8ZGl2IGNsYXNzPVwiYWxlcnQgJHthbGVydENsYXNzfVwiPlxcbmAgKyBgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJjbG9zZVwiIGRhdGEtZGlzbWlzcz1cImFsZXJ0XCI+w5c8L2J1dHRvbj5cXG4ke21lc3NhZ2V9PC9kaXY+YCk7XG4gICAgICAkKCcuY29udGFpbmVyIC5yb3cnKS5wcmVwZW5kKGFsZXJ0Qm94KS5zaG93KCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBQcm9kdWNlcyBKU09OIHN0cmluZ2lmaWVkIGRhdGEgZnJvbSBhIGh0bWwgZm9ybSBkYXRhXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzZWxlY3RvciBKcXVlcnkgZnJvbSBzZWxlY3RvciBzdHJpbmcuXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IEZvcm0gZGF0YSBhcyBhIEpTT04gc3RyaW5nXG4gICAqL1xuXG5cbiAgZnVuY3Rpb24gZ2V0U2VyaWFsaXplZEZvcm1EYXRhKHNlbGVjdG9yKSB7XG4gICAgY29uc3Qgb3V0T2JqID0ge307XG4gICAgY29uc3QgZXh0cmFzT2JqID0ge307XG4gICAgY29uc3QgaW5BcnJheSA9ICQoc2VsZWN0b3IpLnNlcmlhbGl6ZUFycmF5KCk7XG4gICAgLypcbiAgICBGb3JtIGRhdGEgZmllbGRzIGFyZSBwcm9jZXNzZWQgaW4gdGhlIGJlbG93IG9yZGVyOlxuICAgICAgICAtIGNzcmZfdG9rZW5cbiAgICAgICAgLSBjb25uX2lkXG4gICAgICAgIC0gY29ubl90eXBlXG4gICAgICAgIC0gZGVzY3JpcHRpb25cbiAgICAgICAgLSBob3N0XG4gICAgICAgIC0gc2NoZW1hXG4gICAgICAgIC0gbG9naW5cbiAgICAgICAgLSBwYXNzd29yZFxuICAgICAgICAtIHBvcnRcbiAgICAgICAgLSBleHRyYVxuICAgICAgICAtIEFsbCBvdGhlciBjdXN0b20gZm9ybSBmaWVsZHMgKGkuZS4gZmllbGRzIHRoYXQgYXJlIG5hbWVkIGBgZXh0cmFfXy4uLmBgKSBpblxuICAgICAgICAgIGFscGhhYmV0aWNhbCBvcmRlclxuICAgICovXG5cbiAgICAkLmVhY2goaW5BcnJheSwgZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHRoaXMubmFtZSA9PT0gJ2Nvbm5faWQnKSB7XG4gICAgICAgIG91dE9iai5jb25uZWN0aW9uX2lkID0gdGhpcy52YWx1ZTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy52YWx1ZSAhPT0gJycgJiYgdGhpcy5uYW1lID09PSAncG9ydCcpIHtcbiAgICAgICAgb3V0T2JqW3RoaXMubmFtZV0gPSBOdW1iZXIodGhpcy52YWx1ZSk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMudmFsdWUgIT09ICcnICYmIHRoaXMubmFtZSAhPT0gJ2NzcmZfdG9rZW4nKSB7XG4gICAgICAgIC8vIENoZWNrIGlmIHRoZXJlIGFyZSB2YWx1ZXMgaW4gdGhlIGNsYXNzaWMgRXh0cmEgZm9ybSBmaWVsZC4gVGhlc2UgdmFsdWVzIGNvbWUgaW5cbiAgICAgICAgLy8gc3RyaW5naWZpZWQgYW5kIG5lZWQgdG8gYmUgY29udmVydGVkIHRvIGEgSlNPTiBvYmplY3QgaW4gY2FzZSB0aGVyZSBhcmUgY3VzdG9tIGZvcm1cbiAgICAgICAgLy8gZmllbGQgdmFsdWVzIHRoYXQgYWxzbyBuZWVkIHRvIGJlIGluY2x1ZGVkIGluIHRoZSBgYGV4dHJhYGAgb2JqZWN0IGZvciB0aGUgb3V0cHV0XG4gICAgICAgIC8vIHBheWxvYWQuXG4gICAgICAgIGlmICh0aGlzLm5hbWUgPT09ICdleHRyYScpIHtcbiAgICAgICAgICBsZXQgZXh0cmE7XG5cbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgZXh0cmEgPSBKU09OLnBhcnNlKHRoaXMudmFsdWUpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgU3ludGF4RXJyb3IpIHtcbiAgICAgICAgICAgICAgZGlzcGxheUFsZXJ0KGZhbHNlLCAnRXh0cmEgZmllbGQgdmFsdWUgaXMgbm90IHZhbGlkIEpTT04uJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgT2JqZWN0LmVudHJpZXMoZXh0cmEpLmZvckVhY2goKFtrZXksIHZhbF0pID0+IHtcbiAgICAgICAgICAgIGV4dHJhc09ialtrZXldID0gdmFsO1xuICAgICAgICAgIH0pOyAvLyBDaGVjayBpZiBmaWVsZCBpcyBhIGN1c3RvbSBmb3JtIGZpZWxkLlxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMubmFtZS5zdGFydHNXaXRoKCdleHRyYV9fJykpIHtcbiAgICAgICAgICAvLyBwcmlvciB0byBBaXJmbG93IDIuMyBjdXN0b20gZmllbGRzIHdlcmUgc3RvcmVkIGluIHRoZSBleHRyYSBkaWN0IHdpdGggcHJlZml4XG4gICAgICAgICAgLy8gcG9zdC0yLjMgd2UgYWxsb3cgdG8gdXNlIHdpdGggbm8gcHJlZml4XG4gICAgICAgICAgLy8gaGVyZSB3ZSBkb24ndCBrbm93IHdoaWNoIHdlIGFyZSBjb25maWd1cmVkIHRvIHVzZSwgc28gd2UgcG9wdWxhdGUgYm90aFxuICAgICAgICAgIGV4dHJhc09ialt0aGlzLm5hbWVdID0gdGhpcy52YWx1ZTtcbiAgICAgICAgICBleHRyYXNPYmpbdGhpcy5uYW1lLnJlcGxhY2UoL2V4dHJhX18uKz9fXy8sICcnKV0gPSB0aGlzLnZhbHVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG91dE9ialt0aGlzLm5hbWVdID0gdGhpcy52YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pOyAvLyBTdHJpbmdpZnkgYWxsIGV4dHJhcyBmb3IgdGhlIEFKQVggY2FsbCBwYXlsb2FkLlxuXG4gICAgb3V0T2JqLmV4dHJhID0gSlNPTi5zdHJpbmdpZnkoZXh0cmFzT2JqKTtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkob3V0T2JqKTtcbiAgfSAvLyBCaW5kIGNsaWNrIGV2ZW50IHRvIFRlc3QgQ29ubmVjdGlvbiBidXR0b24gJiBwZXJmb3JtIGFuIEFKQVggY2FsbCB2aWEgUkVTVCBBUElcblxuXG4gICQoJyN0ZXN0LWNvbm5lY3Rpb24nKS5vbignY2xpY2snLCBlID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgJC5hamF4KHtcbiAgICAgIHVybDogY29ubmVjdGlvblRlc3RVcmwsXG4gICAgICB0eXBlOiAncG9zdCcsXG4gICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgIGRhdGE6IGdldFNlcmlhbGl6ZWRGb3JtRGF0YSgnZm9ybSNtb2RlbF9mb3JtJyksXG5cbiAgICAgIHN1Y2Nlc3MoZGF0YSkge1xuICAgICAgICBkaXNwbGF5QWxlcnQoZGF0YS5zdGF0dXMsIGRhdGEubWVzc2FnZSk7XG4gICAgICB9LFxuXG4gICAgICBlcnJvcihqcSwgZXJyLCBtc2cpIHtcbiAgICAgICAgZGlzcGxheUFsZXJ0KGZhbHNlLCBtc2cpO1xuICAgICAgfVxuXG4gICAgfSk7XG4gIH0pO1xuICBjb25zdCBjb25uVHlwZUVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29ubl90eXBlJyk7XG4gICQoY29ublR5cGVFbGVtKS5vbignY2hhbmdlJywgZSA9PiB7XG4gICAgY29uc3QgY29ublR5cGUgPSBlLnRhcmdldC52YWx1ZTtcbiAgICBjaGFuZ2VDb25uVHlwZShjb25uVHlwZSk7XG4gIH0pOyAvLyBJbml0aWFsaXplIHRoZSBmb3JtIGJ5IHNldHRpbmcgYSBjb25uZWN0aW9uIHR5cGUuXG5cbiAgY2hhbmdlQ29ublR5cGUoY29ublR5cGVFbGVtLnZhbHVlKTtcbn0pOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./static/js/connection_form.js\n");

/***/ }),

/***/ "./static/js/utils.js":
/*!****************************!*\
  !*** ./static/js/utils.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"appendSearchParams\": () => (/* binding */ appendSearchParams),\n/* harmony export */   \"finalStatesMap\": () => (/* binding */ finalStatesMap),\n/* harmony export */   \"getMetaValue\": () => (/* binding */ getMetaValue)\n/* harmony export */ });\n/*!\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n/* global document */\nfunction getMetaValue(name) {\n  const elem = document.querySelector(`meta[name=\"${name}\"]`);\n\n  if (!elem) {\n    return null;\n  }\n\n  return elem.getAttribute('content');\n}\nconst finalStatesMap = () => new Map([['success', 0], ['failed', 0], ['upstream_failed', 0], ['up_for_retry', 0], ['up_for_reschedule', 0], ['running', 0], ['deferred', 0], ['sensing', 0], ['queued', 0], ['scheduled', 0], ['skipped', 0], ['no_status', 0]]);\nconst appendSearchParams = (url, params) => {\n  const separator = url.includes('?') ? '&' : '?';\n  return `${url}${separator}${params}`;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zdGF0aWMvanMvdXRpbHMuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9BaXJmbG93Ly4vc3RhdGljL2pzL3V0aWxzLmpzP2Q2OGYiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4gKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiAqIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4gKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4gKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4gKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcbiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4gKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4gKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4gKiB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKiBnbG9iYWwgZG9jdW1lbnQgKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRNZXRhVmFsdWUobmFtZSkge1xuICBjb25zdCBlbGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgbWV0YVtuYW1lPVwiJHtuYW1lfVwiXWApO1xuXG4gIGlmICghZWxlbSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcmV0dXJuIGVsZW0uZ2V0QXR0cmlidXRlKCdjb250ZW50Jyk7XG59XG5leHBvcnQgY29uc3QgZmluYWxTdGF0ZXNNYXAgPSAoKSA9PiBuZXcgTWFwKFtbJ3N1Y2Nlc3MnLCAwXSwgWydmYWlsZWQnLCAwXSwgWyd1cHN0cmVhbV9mYWlsZWQnLCAwXSwgWyd1cF9mb3JfcmV0cnknLCAwXSwgWyd1cF9mb3JfcmVzY2hlZHVsZScsIDBdLCBbJ3J1bm5pbmcnLCAwXSwgWydkZWZlcnJlZCcsIDBdLCBbJ3NlbnNpbmcnLCAwXSwgWydxdWV1ZWQnLCAwXSwgWydzY2hlZHVsZWQnLCAwXSwgWydza2lwcGVkJywgMF0sIFsnbm9fc3RhdHVzJywgMF1dKTtcbmV4cG9ydCBjb25zdCBhcHBlbmRTZWFyY2hQYXJhbXMgPSAodXJsLCBwYXJhbXMpID0+IHtcbiAgY29uc3Qgc2VwYXJhdG9yID0gdXJsLmluY2x1ZGVzKCc/JykgPyAnJicgOiAnPyc7XG4gIHJldHVybiBgJHt1cmx9JHtzZXBhcmF0b3J9JHtwYXJhbXN9YDtcbn07Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./static/js/utils.js\n");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval-source-map devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./static/js/connection_form.js");
/******/ 	
/******/ 	return __webpack_exports__;
/******/ })()
;
});